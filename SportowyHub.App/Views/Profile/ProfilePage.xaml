<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:res="clr-namespace:SportowyHub.Resources.Strings"
             xmlns:vm="clr-namespace:SportowyHub.ViewModels"
             x:Class="SportowyHub.Views.Profile.ProfilePage"
             x:DataType="vm:ProfileViewModel"
             Title="{x:Static res:AppResources.TabProfile}">

    <ScrollView>
        <VerticalStackLayout Spacing="0">

            <!-- Branding -->
            <Image Source="logo_full.png"
                   HeightRequest="48"
                   Aspect="AspectFit"
                   HorizontalOptions="Center"
                   Margin="16,24,16,16" />

            <!-- Account Section Header -->
            <Label Text="{x:Static res:AppResources.ProfileAccountSection}"
                   Style="{StaticResource SectionHeader}"
                   BackgroundColor="{AppThemeBinding Light={StaticResource Surface}, Dark={StaticResource SurfaceDark}}"
                   Padding="16,8" />

            <!-- Sign In Row (logged out) -->
            <VerticalStackLayout IsVisible="{Binding IsLoggedIn, Converter={StaticResource InvertBoolConverter}}">
                <Grid Padding="16,0"
                      HeightRequest="48"
                      ColumnDefinitions="*,Auto">
                    <Label AutomationId="SignInRow"
                           Text="{x:Static res:AppResources.ProfileSignIn}"
                           VerticalOptions="Center" />
                    <Label Grid.Column="1"
                           Text="›"
                           FontSize="20"
                           TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                           VerticalOptions="Center" />
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding SignInCommand}" />
                    </Grid.GestureRecognizers>
                </Grid>
                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                         Margin="16,0" />
            </VerticalStackLayout>

            <!-- Create Account Row (logged out) -->
            <VerticalStackLayout IsVisible="{Binding IsLoggedIn, Converter={StaticResource InvertBoolConverter}}">
                <Grid Padding="16,0"
                      HeightRequest="48"
                      ColumnDefinitions="*,Auto">
                    <Label AutomationId="CreateAccountRow"
                           Text="{x:Static res:AppResources.ProfileCreateAccount}"
                           VerticalOptions="Center" />
                    <Label Grid.Column="1"
                           Text="›"
                           FontSize="20"
                           TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                           VerticalOptions="Center" />
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding CreateAccountCommand}" />
                    </Grid.GestureRecognizers>
                </Grid>
                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                         Margin="16,0" />
            </VerticalStackLayout>

            <!-- Account Profile Row (logged in) -->
            <VerticalStackLayout IsVisible="{Binding IsLoggedIn}">
                <Grid Padding="16,0"
                      HeightRequest="48"
                      ColumnDefinitions="*,Auto">
                    <Label Text="{x:Static res:AppResources.ProfileAccountProfile}"
                           VerticalOptions="Center" />
                    <Label Grid.Column="1"
                           Text="›"
                           FontSize="20"
                           TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                           VerticalOptions="Center" />
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToAccountProfileCommand}" />
                    </Grid.GestureRecognizers>
                </Grid>
                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                         Margin="16,0" />
            </VerticalStackLayout>

            <!-- Sign Out Row (logged in) -->
            <VerticalStackLayout IsVisible="{Binding IsLoggedIn}">
                <Grid AutomationId="ProfileSignOutRow"
                      Padding="16,0"
                      HeightRequest="48"
                      ColumnDefinitions="*,Auto">
                    <Label Text="{x:Static res:AppResources.SignOut}"
                           TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}"
                           VerticalOptions="Center" />
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding SignOutCommand}" />
                    </Grid.GestureRecognizers>
                </Grid>
                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                         Margin="16,0" />
            </VerticalStackLayout>

            <!-- Settings Section Header -->
            <Label AutomationId="SettingsLabel"
                   Text="{x:Static res:AppResources.ProfileSettingsSection}"
                   Style="{StaticResource SectionHeader}"
                   BackgroundColor="{AppThemeBinding Light={StaticResource Surface}, Dark={StaticResource SurfaceDark}}"
                   Padding="16,8"
                   Margin="0,8,0,0" />

            <!-- Language Row -->
            <Grid Padding="16,0"
                  HeightRequest="48"
                  ColumnDefinitions="*,Auto">
                <Label AutomationId="LanguageLabel"
                       Text="{x:Static res:AppResources.SettingsLanguage}"
                       VerticalOptions="Center" />
                <Picker AutomationId="LanguagePicker"
                        Grid.Column="1"
                        ItemsSource="{Binding Languages}"
                        SelectedIndex="{Binding SelectedLanguageIndex}"
                        TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                        VerticalOptions="Center"
                        HorizontalOptions="End" />
            </Grid>
            <BoxView HeightRequest="1"
                     Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                     Margin="16,0" />

            <!-- Theme Row -->
            <Grid Padding="16,0"
                  HeightRequest="48"
                  ColumnDefinitions="*,Auto">
                <Label AutomationId="ThemeLabel"
                       Text="{x:Static res:AppResources.SettingsTheme}"
                       VerticalOptions="Center" />
                <Picker AutomationId="ThemePicker"
                        Grid.Column="1"
                        ItemsSource="{Binding Themes}"
                        SelectedIndex="{Binding SelectedThemeIndex}"
                        TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                        VerticalOptions="Center"
                        HorizontalOptions="End" />
            </Grid>
            <BoxView HeightRequest="1"
                     Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                     Margin="16,0" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
