<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:SportowyHub.ViewModels"
             xmlns:res="clr-namespace:SportowyHub.Resources.Strings"
             x:Class="SportowyHub.Views.Listings.ListingDetailPage"
             x:DataType="vm:ListingDetailViewModel"
             Title="{Binding Listing.Title, FallbackValue=''}"
             Shell.TabBarIsVisible="False">

    <Grid>
        <ActivityIndicator IsRunning="{Binding IsLoading}"
                           IsVisible="{Binding IsLoading}"
                           Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}"
                           VerticalOptions="Center"
                           HorizontalOptions="Center" />

        <ScrollView IsVisible="{Binding IsLoading, Converter={StaticResource InvertBoolConverter}}">
            <VerticalStackLayout Padding="16" Spacing="12">

                <Label Text="{Binding Listing.Title}"
                       Style="{StaticResource Headline}"
                       Margin="0,8,0,0" />

                <Label Text="{Binding FormattedPrice}"
                       FontSize="20"
                       FontFamily="OpenSansSemibold"
                       TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}"
                       IsVisible="{Binding FormattedPrice.Length, Converter={StaticResource IntToBoolConverter}}" />

                <Label Text="{Binding FormattedLocation}"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                       IsVisible="{Binding FormattedLocation.Length, Converter={StaticResource IntToBoolConverter}}" />

                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light={StaticResource Border}, Dark={StaticResource BorderDark}}"
                         Margin="0,4" />

                <Label Text="{Binding Listing.Description}"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light={StaticResource TextPrimary}, Dark={StaticResource TextPrimaryDark}}"
                       LineBreakMode="WordWrap" />

                <Label Text="{Binding Listing.PublishedAt}"
                       FontSize="12"
                       TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}"
                       Margin="0,8,0,0" />

            </VerticalStackLayout>
        </ScrollView>

        <VerticalStackLayout IsVisible="{Binding HasError}"
                             VerticalOptions="Center"
                             HorizontalOptions="Center"
                             Spacing="8">
            <Label Text="{x:Static res:AppResources.ErrorGeneric}"
                   HorizontalTextAlignment="Center"
                   TextColor="{AppThemeBinding Light={StaticResource TextSecondary}, Dark={StaticResource TextSecondaryDark}}" />
        </VerticalStackLayout>
    </Grid>

</ContentPage>
